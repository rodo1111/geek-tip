<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<dom-module id="tips-login">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <firebase-app
      auth-domain="project-4851512002671130876.firebaseapp.com"
      api-key="AIzaSyDATUSSUpCcNq_dbGV2xrqrE0w9gpo_Ym0" 
      database-url="https://project-4851512002671130876.firebaseio.com">
    </firebase-app>
    <firebase-auth id="auth" user="{{user}}" provider="google" on-error="showError"></firebase-auth>

    {{user.uid}}
    <paper-button raised on-click="_login">Login</paper-button>
    
    <div id="createAccount">
      <paper-input label="Name" value="{{accountName}}"></paper-input>
      <paper-input label="Email" value="{{accountEmail}}">
        <div suffix>@prodigious.cr</div>
      </paper-input>
      <paper-input label="Password" type="password" value="{{accountPassword}}"></paper-input>
      <paper-button raised on-click="_createAccount">Create account</paper-button>
    </div>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'tips-login',

      properties: {
        user: {
          type: Object,
          value: null
        },
      },
      
      _login: function() {
        this.$.auth.signInWithPopup();
      },
      
      _createAccount: function() {
        this.$.firebaseLogin.createUser(this.accountEmail, this.accountPassword);
      },
      
      _userCreatedSuccess: function(user) {
        console.log(user);
      },
      
      _handleError: function(error) {
        console.log(error);
      }
    });
  })();
</script>