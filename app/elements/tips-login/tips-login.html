<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<dom-module id="tips-login">
  <template>
    <style>
      :host {
        display: block;
      }
      .welcome-msg {
        @apply(--paper-font-title);
        margin-bottom: 20px;
      }

      paper-button {
        @apply(--paper-font-button);
      }
    </style>

    <firebase-app
      auth-domain="project-4851512002671130876.firebaseapp.com"
      api-key="AIzaSyDATUSSUpCcNq_dbGV2xrqrE0w9gpo_Ym0" 
      database-url="https://project-4851512002671130876.firebaseio.com">
    </firebase-app>
    <firebase-auth id="auth" user="{{user}}" provider="facebook" on-login="_handleLogin" on-error="_handleError"></firebase-auth>

    <div hidden="[[user]]">
      <paper-button raised on-click="_login">Facebook Login</paper-button>
    </div>

    <div hidden="[[!user]]">
      <div class="welcome-msg">Welcome {{user.displayName}}</div>
      <paper-button raised on-click="_logout">Logout</paper-button>
    </div>

    {{print(user)}}
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'tips-login',

      properties: {
        user: {
          type: Object,
          value: null
        },
      },

      print: function(user) {
        console.log(user);
      },
      
      _login: function() {
        this.$.auth.signInWithPopup();
      },

      _logout: function() {
        this.$.auth.signOut();
      },
      
      _handleLogin: function(user) {
        console.log(user);
      },

      _handleError: function(error) {
        console.log(error);
      }
    });
  })();
</script>